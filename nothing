from pyrogram import Client, errors
import asyncio

api_id = 1234567
api_hash = "cb9977450ca1b9bacea959786a0f9fbe"

source = -1001234567890
destination = -1009876543210

# No bot token here
app = Client("user_session", api_id=api_id, api_hash=api_hash)

async def main():
    async with app:
        async for msg in app.get_chat_history(source):
            if msg.video:
                try:
                    await msg.copy(destination)
                except errors.FloodWait as e:
                    print(f"Sleeping for {e.value} seconds")
                    await asyncio.sleep(e.value)
                    await msg.copy(destination)

asyncio.run(main())
